<div class="content">
    <h1>Registrieren</h1>
    <p>Falls du bereits eine DID und einen Account im DID-Speicher hast, <a routerLink="/login">logge dich hier ein</a>.</p>
    <main *ngIf="state === 'loading'">
      <mat-spinner></mat-spinner>
      <div class="mobile-space desktop-space"></div>
      <div class="white-text">{{ this.loadingState }}</div>
    </main>
    <main *ngIf="state === 'registerKeeper'">
      <p>Wähle zunächst Deine Zugangsdaten für den DID-Speicher</p>
      <form #registerKeeper="ngForm" [ngFormOptions]="{updateOn: 'change'}" (ngSubmit)="submitKeeperLogin(registerKeeper.value)">
        <div class="thin"></div>
        <mat-form-field appearance="fill">
          <mat-label>Nutzername</mat-label>
          <input matInput placeholder="petralustig1997" name="username" required ngModel>
        </mat-form-field>
        <div class="thin"></div>
        <div class="thin"></div>
        <mat-form-field appearance="fill">
          <mat-label>Passwort</mat-label>
          <input matInput placeholder="" name="password" type="password" required ngModel>
        </mat-form-field>
        <div class="thin"></div>
        <div class="thin"></div>
        <button mat-raised-button color="primary" type="submit" [disabled]="!registerKeeper.valid">Absenden</button>
      </form>
    </main>
    <main *ngIf="state === 'registerUniversity'">
      <p>Tätige nun alle Angaben zur Immatrikulation an der Hochschule</p>
      <form #registerUniversity="ngForm" [ngFormOptions]="{updateOn: 'change'}" (ngSubmit)="submitUniversityLogin(registerUniversity.value)">
          <mat-form-field appearance="fill">
            <mat-label>Vorname/n</mat-label>
            <input matInput placeholder="Max" name="firstNames" required ngModel>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Nachname</mat-label>
            <input matInput placeholder="Mustermann" name="lastName" required ngModel>
          </mat-form-field>
          <mat-form-field class="wide" appearance="fill">
            <mat-label>Straße</mat-label>
            <input matInput placeholder="Münchener Heidestraße" name="adress1" required ngModel>
          </mat-form-field>
          <mat-form-field class="thin" appearance="fill">
            <mat-label>Hausnr.</mat-label>
            <input matInput type="number" placeholder="17" name="adress2" required ngModel>
          </mat-form-field>
          <mat-form-field class="thin" appearance="fill">
            <mat-label>PLZ</mat-label>
            <input matInput type="number" placeholder="06366" name="adress3" required ngModel>
          </mat-form-field>
          <mat-form-field class="wide" appearance="fill">
            <mat-label>Ort</mat-label>
            <input matInput placeholder="Münchener Heidestraße" name="adress4" required ngModel>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Bundesland</mat-label>
            <input matInput placeholder="Bayern" name="adress5" required ngModel>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Land</mat-label>
            <input matInput placeholder="Deutschland" name="adress6" required ngModel>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Geburtsdatum</mat-label>
            <input matInput [matDatepicker]="datepicker" name="birthday" required ngModel>
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matSuffix [for]="datepicker"></mat-datepicker-toggle>
            <mat-datepicker #datepicker>
              <mat-datepicker-actions>
                <button mat-button matDatepickerCancel>Abbrechen</button>
                <button mat-raised-button color="primary" matDatepickerApply>Auswählen</button>
              </mat-datepicker-actions>
            </mat-datepicker>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Studiengang</mat-label>
            <mat-select name="studySubject" ngModel required>
              <div *ngFor="let subject of studySubjects">
                <mat-option value="{{ subject }}">{{ subject }}</mat-option>
              </div>
            </mat-select>
          </mat-form-field>
          <!-- <div class="image-upload">
              <label for="file-input">Hochschulzugangsberechtigung</label>
              <input
                id="file-input"
                type="file"
                accept=".pdf, application/pdf"
                name="qualification"
                #qualificationInput
                (change)="log(qualificationInput.files)" ngModel>
          </div> -->
          <div class="thin"></div>
          <button mat-raised-button color="primary" type="submit" [disabled]="!registerUniversity.valid">Absenden</button>
          <div class="ultrawide mobile-space"></div>
        </form>
        <!-- <div style="margin-top: 100px; color: white;">{{ register.value | json }}</div> -->
      </main>
      <main *ngIf="state === 'nameCredential'">
        <p>Dein Credential wurde erstellt! Gib ihm einen einzigartigen Namen für den DID-Speicher</p>
        <form #nameCredential="ngForm" [ngFormOptions]="{updateOn: 'change'}" (ngSubmit)="submitCredentialName(nameCredential.value.credentialName)">
          <div class="thin"></div>
          <mat-form-field appearance="fill">
            <mat-label>Credential-Name</mat-label>
            <input matInput placeholder="einzigartiger Name" name="credentialName" required ngModel>
          </mat-form-field>
          <div class="thin"></div>
          <div class="thin"></div>
          <button mat-raised-button color="primary" type="submit" [disabled]="!nameCredential.valid">Absenden</button>
        </form>
      </main>
      <main *ngIf="state === 'passwordForPresentation'">
        <p>Um mit deinen Daten nun eine Verifiable Presentation anzufordern, wird noch einmal dein Passwort für den DID-Speicher benötigt</p>
        <form #passwordForPresentation="ngForm" [ngFormOptions]="{updateOn: 'change'}" (ngSubmit)="submitPasswordForLogin(passwordForPresentation.value.password)">
          <div class="thin"></div>
          <mat-form-field appearance="fill">
            <mat-label>Passwort</mat-label>
            <input matInput type="password" name="password" required ngModel>
          </mat-form-field>
          <div class="thin"></div>
          <div class="thin"></div>
          <button mat-raised-button color="primary" type="submit" [disabled]="!passwordForPresentation.valid">Absenden</button>
        </form>
      </main>
    </div>